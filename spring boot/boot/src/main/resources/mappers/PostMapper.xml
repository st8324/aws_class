<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.hi.boot.dao.PostDAO">
   
   	<select id="getBoardList" resultType="Board">
		select * from board
   	</select>
   	<!-- 
   	- select 태그만 resultType 또는 resultMap이 필요
   	- update, insert, delete는 필요 없음
   	  - DAO의 리턴타입으로 boolean, int 지정 가능. 
   	    mapper에서는 따로 지정할 필요 없음 
   	 -->
   	<insert id="insertBoard">
   		insert into board(bo_name) values(#{name})
   	</insert>
   	
   	<delete id="deleteBoard">
   		delete from board where bo_num = #{num}
   	</delete>
   	<update id="updateBoard">
   		update board
   		set
   			bo_name = #{name}
   		where
   			bo_num = #{num}
   	</update>
   	<select id="getPostList" resultType="Post">
   		select * from post 
   		where 
   			po_del = 'N'
   			<if test="cri.boNum != 0">
   			and po_bo_num = #{cri.boNum}
   			</if>
   		order by po_num desc
   		limit #{cri.pageStart}, #{cri.perPageNum}
   	</select>
   	<select id="getPost" resultType="Post">
   		select * from post where po_num = #{num}
   	</select>
   	<select id="getBoard" resultType="Board" >
   		select * from board where bo_num = #{num}
   	</select>
   	<insert id="insertPost">
   		insert into post(po_title, po_content, po_me_id, po_bo_num)
   		values(#{post.title},#{post.content},
   			#{post.id},#{post.board})
   	</insert>
   	<update id="updatePostView">
   		update post set po_view = po_view + 1 
   		where po_num = #{num}
   	</update>
   	<select id="selectPostListCount" resultType="int">
   		select count(*) from post 
   		where po_del = 'N'
   		<if test="cri.boNum != 0">
   		and po_bo_num = #{cri.boNum}
   		</if>
   	</select>
</mapper>




